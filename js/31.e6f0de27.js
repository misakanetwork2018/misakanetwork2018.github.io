(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{ea90:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticClass:"q-mt-sm full-width",attrs:{color:"primary"},on:{click:t.createTradeOnly}},[t._v("创建支付")]),a("q-btn",{staticClass:"q-mt-sm full-width",attrs:{color:"primary"},on:{click:t.ajaxTest}},[t._v("模拟付款(Ajax)")])],1)},s=[],i=a("967e"),r=a.n(i),c=(a("96cf"),a("fa84")),o=a.n(c),u=(a("c5f6"),{props:{invoice:{type:Number,required:!1},amount:{type:Number,required:!1}},methods:{createTradeOnly:function(){var t=this;this.createTrade().then((function(e){e.data.success&&t.$q.dialog({title:"创建成功",message:"请到后台手动入账"})}))},ajaxTest:function(){var t=this;return o()(r.a.mark((function e(){var a,n,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createTrade();case 2:a=e.sent,n=!1,a.data.success&&(n=a.data.finished,n||(s=t.$axios.get("/pay/notify/test?trade_no="+a.data.trade_no),n="ok"===s.data),n&&(t.$q.dialog({title:"支付完成",message:"模拟支付已完成(notify)"}),t.$emit("finish"))),n||t.$q.dialog({title:"支付失败",message:a.data.msg});case 6:case"end":return e.stop()}}),e)})))()},createTrade:function(){return this.$axios.post("/pay/create",{invoice_id:this.invoice,amount:this.amount,gateway:"test"})}},components:{}}),d=u,l=a("2877"),m=a("eebe"),f=a.n(m),p=a("9c40"),h=Object(l["a"])(d,n,s,!1,null,"5cbf1a07",null);e["default"]=h.exports;f()(h,"components",{QBtn:p["a"]})}}]);