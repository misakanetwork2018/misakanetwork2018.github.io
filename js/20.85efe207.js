(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"0cf5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"q-pa-md"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-4 q-mt-md q-mr-md"},[i("q-card",[i("q-card-section",{staticClass:"text-center"},[i("p",[t._v("当前可生成邀请码数量："+t._s(t.invite_limit))])]),i("q-card-actions",{attrs:{vertical:""}},[i("q-btn",{attrs:{color:"primary",flat:""},on:{click:t.buy}},[t._v("购买邀请码生成数")]),i("q-btn",{attrs:{color:"primary",flat:""},on:{click:t.generate}},[t._v("生成邀请码")])],1)],1)],1),i("div",{staticClass:"col-12 col-md-grow q-mt-md"},[i("q-markup-table",[i("thead",[i("tr",[i("th",[t._v("\n              未使用的邀请码"),i("br"),t._v("\n              Tip: 鼠标右键点击/触摸长按弹出复制菜单\n            ")])])]),i("tbody",t._l(t.invite_codes,(function(e,n){return i("tr",{key:n},[i("td",{attrs:{align:"center"}},[t._v("\n              "+t._s(e)+"\n              "),i("q-menu",{attrs:{fit:"","touch-position":"","context-menu":""}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return t.copyCode(e)}}},[i("q-item-section",[t._v("复制邀请码")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return t.copyLink(e)}}},[i("q-item-section",[t._v("复制邀请链接")])],1)],1)],1)],1)])})),0)])],1)])])},o=[],s=i("1c93"),c={data:function(){return{invite_limit:0,invite_codes:[]}},created:function(){this.refresh()},methods:{refresh:function(){this.getInviteLimit(),this.getInviteCode()},getInviteLimit:function(){var t=this;this.$axios.get("/user/invite_limit").then((function(e){t.invite_limit=e.data}))},getInviteCode:function(){var t=this;this.$axios.get("/user/invite_codes").then((function(e){t.invite_codes=e.data}))},buy:function(){var t=this;this.$axios.get("/user/credit").then((function(e){t.$q.dialog({title:"购买邀请码",message:"请输入购买的数量，1元/个，购买前请充值账户余额<br>[当前账户余额：￥"+e.data+"]",html:!0,prompt:{model:1,type:"number",isValid:function(t){return t>0}},cancel:!0,persistent:!0}).onOk((function(e){t.$axios.post("/user/buy_invite_limit",{quantity:e}).then((function(e){e.data.success?(t.$q.notify("购买邀请码成功"),t.getInviteLimit()):t.$q.notify(e.data.msg)})).catch((function(){t.$q.notify("未知错误")}))}))}))},generate:function(){var t=this;this.$axios.post("/user/invite_code").then((function(e){e.data.success?(t.$q.notify("生成邀请码成功"),t.refresh()):t.$q.notify(e.data.msg)})).catch((function(){t.$q.notify("未知错误")}))},copyCode:function(t){var e=this;this.$copyText(t).then((function(t){e.$q.notify({color:"positive",message:"复制成功"})}),(function(t){e.$q.notify({color:"warning",message:"复制失败，请手动复制"})}))},copyLink:function(t){var e=this,i=/(http|https:\/\/.*?)\//,n=i.exec(window.location.href)[1];this.$copyText(n+"/register?code="+t).then((function(t){e.$q.notify({color:"positive",message:"复制成功"})}),(function(t){e.$q.notify({color:"warning",message:"复制失败，请手动复制"})}))}},watch:{"$store.getters.refresh":s["a"]}},a=c,r=i("2877"),u=i("eebe"),l=i.n(u),f=i("9989"),d=i("f09f"),p=i("a370"),m=i("4b7e"),h=i("9c40"),v=i("2bb1"),q=i("4e73"),g=i("1c1c"),y=i("66e5"),_=i("4074"),b=i("7f67"),$=Object(r["a"])(a,n,o,!1,null,null,null);e["default"]=$.exports;l()($,"components",{QPage:f["a"],QCard:d["a"],QCardSection:p["a"],QCardActions:m["a"],QBtn:h["a"],QMarkupTable:v["a"],QMenu:q["a"],QList:g["a"],QItem:y["a"],QItemSection:_["a"]}),l()($,"directives",{ClosePopup:b["a"]})},"1c93":function(t,e,i){"use strict";e["a"]={deep:!0,handler:function(t){t&&(this.refresh(),this.$store.dispatch("base/refreshEnd"))}}}}]);