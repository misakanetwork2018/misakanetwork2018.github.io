(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{"1c93":function(t,e,a){"use strict";e["a"]={deep:!0,handler:function(t){t&&(this.refresh(),this.$store.dispatch("base/refreshEnd"))}}},f2ea:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{title:"登录日志",data:t.list,columns:t.columns,"table-style":"max-height: calc(100vh - 80px)","row-key":"id","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[10,20,50,100],"no-data-label":"暂无日志",loading:t.loading,dense:t.$q.screen.lt.md,"binary-state-sort":""},on:{"update:pagination":function(e){t.pagination=e},request:t.loadList},scopedSlots:t._u([{key:"body-cell-type",fn:function(e){return[a("q-td",{attrs:{props:e}},[t._v("\n        "+t._s(t._f("type")(e.value))+"\n      ")])]}},{key:"body-cell-amount",fn:function(e){return[a("q-td",{attrs:{props:e}},[t._v("\n        ￥"+t._s(e.value.toFixed(2))+"\n      ")])]}}])})],1)},i=[],o=a("1c93"),s={filters:{type:function(t){switch(t){case"normal":return"用户名+密码登录";case"telegram":return"Telegram登录"}}},data:function(){var t=this;return{list:[],loading:!1,columns:[{name:"time",label:"时间",field:"time",align:"left",sortable:!0,style:"width: 200px",format:function(e,a){return t.$tools.tsmToString(e)}},{name:"type",label:"登录方式",field:"type",align:"left",sortable:!0},{name:"ip",label:"IP地址",field:"ip",align:"left"}],pagination:{sortBy:"time",descending:!0,page:1,rowsPerPage:10,rowsNumber:0}}},created:function(){this.refresh()},methods:{refresh:function(){this.loadList({pagination:this.pagination})},loadList:function(t){var e=this,a=t.pagination,n=a.page,i=a.rowsPerPage,o=a.sortBy,s=a.descending;this.loading=!0,this.$axios.get("/log/login",{params:this.$tools.createListQuery(t.pagination)}).then((function(t){var a=t.data,r=a.data,l=a.total;e.list=r,e.pagination.rowsNumber=l,e.loading=!1,e.pagination.page=n,e.pagination.rowsPerPage=i,e.pagination.sortBy=o,e.pagination.descending=s}))}},watch:{"$store.getters.refresh":o["a"]}},r=s,l=a("2877"),c=a("eebe"),d=a.n(c),p=a("eaac"),u=a("db86"),g=Object(l["a"])(r,n,i,!1,null,null,null);e["default"]=g.exports;d()(g,"components",{QTable:p["a"],QTd:u["a"]})}}]);