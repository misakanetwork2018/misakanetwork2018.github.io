(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{"1c93":function(t,a,e){"use strict";a["a"]={deep:!0,handler:function(t){t&&(this.refresh(),this.$store.dispatch("base/refreshEnd"))}}},f145:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"q-pa-md"},[e("q-table",{attrs:{title:"流量记录",data:t.data,columns:t.columns,"table-style":"max-height: calc(100vh - 80px)","row-key":"id","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[10,20,50,100],"no-data-label":"暂无记录",loading:t.loading,dense:t.$q.screen.lt.md,"binary-state-sort":""},on:{"update:pagination":function(a){t.pagination=a},request:t.loadList},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"q-table__title q-mr-md"},[t._v("流量记录")]),e("q-select",{staticStyle:{width:"250px"},attrs:{filled:"",multiple:"",options:t.options,label:"筛选节点","emit-value":"","map-options":""},model:{value:t.nid,callback:function(a){t.nid=a},expression:"nid"}})]},proxy:!0},{key:"body-cell-status",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("div",[e("q-badge",{attrs:{color:t.$invoiceStatus.color[a.value]}},[t._v("\n            "+t._s(t.$invoiceStatus.text[a.value])+"\n          ")])],1)])]}}])})],1)},i=[],o=e("967e"),s=e.n(o),r=(e("96cf"),e("fa84")),l=e.n(r),c=(e("7514"),e("1c93")),d={data:function(){var t=this;return{loading:!1,data:[],columns:[{name:"nid",label:"节点",field:"nid",align:"left",sortable:!0,format:function(a){var e=t.options.find((function(t){return t.value===parseInt(a)}));return e?e.label:"未知节点"}},{name:"real",label:"实际使用流量",field:"real",align:"left",format:function(a){return t.$tools.bytesToSize(a)},sortable:!0},{name:"calc",label:"系统扣除流量",field:"calc",align:"left",format:function(a){return t.$tools.bytesToSize(a)},sortable:!0},{name:"time",label:"记录时间",field:"time",align:"center",format:function(a){return t.$tools.tsmToString(a)},sortable:!0}],nid:[],options:[],pagination:{sortBy:"time",descending:!0,page:1,rowsPerPage:10,rowsNumber:0}}},created:function(){this.refresh()},methods:{refresh:function(){var t=this;return l()(s.a.mark((function a(){var e;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.get("/nodes");case 2:e=a.sent,t.options=e.data,t.loadList({pagination:t.pagination});case 5:case"end":return a.stop()}}),a)})))()},loadList:function(t){var a=this,e=t.pagination,n=e.page,i=e.rowsPerPage,o=e.sortBy,s=e.descending;this.loading=!0,this.showDialog=!1;var r=this.$tools.createListQuery(t.pagination);r.nid=this.nid,this.$axios.get("/log/trans_record",{params:r}).then((function(t){var e=t.data,r=e.data,l=e.total;a.data=r,a.pagination.rowsNumber=l,a.loading=!1,a.pagination.page=n,a.pagination.rowsPerPage=i,a.pagination.sortBy=o,a.pagination.descending=s}))}},components:{},watch:{"$store.getters.refresh":c["a"],nid:function(t,a){this.refresh()}}},u=d,p=e("2877"),f=e("eebe"),g=e.n(f),h=e("eaac"),m=e("ddd8"),b=e("db86"),v=e("58a8"),w=Object(p["a"])(u,n,i,!1,null,"0a111f28",null);a["default"]=w.exports;g()(w,"components",{QTable:h["a"],QSelect:m["a"],QTd:b["a"],QBadge:v["a"]})}}]);